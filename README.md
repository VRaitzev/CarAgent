# Python AI-–∞–≥–µ–Ω—Ç –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–∞ (LangGraph + SQLite)

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π **—Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–≥–æ AI-–∞–≥–µ–Ω—Ç–∞ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–∞**, —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –Ω–∞ –±–∞–∑–µ **LangGraph** –∏ **SQLite**.  
–ê–≥–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö **—É—Å–ª—É–≥–∞—Ö** –∏ **—Ü–µ–Ω–∞—Ö**, –∏—Å–ø–æ–ª—å–∑—É—è –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø—Ä–∞–π—Å-–ª–∏—Å—Ç–∞.  
–û–Ω –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ç—Ä—ë—Ö —Ä–µ–∂–∏–º–∞—Ö:
1. –ß–µ—Ä–µ–∑ **LangGraph Studio**  
2. –í –≤–∏–¥–µ **Telegram-–±–æ—Ç–∞**  
3. –í **–∫–æ–Ω—Å–æ–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ**

---

## üì¶ –°—Ç–µ–∫ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|------------|
| **Python 3.12+** | –°—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. |
| **LangGraph** | –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —É–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –≥—Ä–∞—Ñ–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≥–µ–Ω—Ç–∞. |
| **LangChain Nebius** | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ (ChatNebius + NebiusEmbeddings). |
| **SQLite** | –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–∏–∞–ª–æ–≥–∞. |
| **ChromaDB** | –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ —É—Å–ª—É–≥–∞–º. |
| **uv** | –ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã. |
| **python-telegram-bot** | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Telegram (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ). |
| **pandas / openpyxl** | –†–∞–±–æ—Ç–∞ —Å Excel-—Ñ–∞–π–ª–æ–º –ø—Ä–∞–π—Å-–ª–∏—Å—Ç–∞. |

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
üìÇ project_root
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ Price.xlsx            # –ü—Ä–∞–π—Å-–ª–∏—Å—Ç, –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Chroma –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
‚îÇ   ‚îî‚îÄ‚îÄ chroma_db/            # –õ–æ–∫–∞–ª—å–Ω–∞—è –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞
‚îú‚îÄ‚îÄ agent_state.db            # SQLite –±–∞–∑–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îú‚îÄ‚îÄ main.py                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è LangGraph Studio
‚îú‚îÄ‚îÄ assistant.py              # –ö–ª–∞—Å—Å CarAssistent (–ª–æ–≥–∏–∫–∞ –∞–≥–µ–Ω—Ç–∞)
‚îú‚îÄ‚îÄ controller.py             # Controller + –æ–±—ë—Ä—Ç–∫–∏ (Telegram –∏ Console)
‚îú‚îÄ‚îÄ .env                      # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (API –∫–ª—é—á–∏)
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ pyproject.toml            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (uv)
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **Python 3.12** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π [uv](https://docs.astral.sh/uv/)
- –ê–∫–∫–∞—É–Ω—Ç –∏ API-–∫–ª—é—á **Nebius**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π **LangGraph Studio**

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```
NEBIUS_API_KEY=–≤–∞—à_api_–∫–ª—é—á
TG_TOKEN=—Ç–æ–∫–µ–Ω_—Ç–µ–ª–µ–≥—Ä–∞–º_–±–æ—Ç–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Telegram-—Ä–µ–∂–∏–º)
```

---

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```
uv sync
```

---

### 3. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–ü–æ–º–µ—Å—Ç–∏ —Ñ–∞–π–ª –ø—Ä–∞–π—Å-–ª–∏—Å—Ç–∞ `Price.xlsx` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `data/`.  
–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∞–≥–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ `data/chroma_db`.

---

## üöÄ –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞

### –ß–µ—Ä–µ–∑ LangGraph Studio

1. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
   ```
   uv sync
   ```
2. –í —Ñ–∞–π–ª–µ `main.py` —Å–æ–∑–¥–∞—ë—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä –∏ –≥—Ä–∞—Ñ –∞–≥–µ–Ω—Ç–∞:
   ```
   from assistant import CarAssistent
   agent = CarAssistent()
   agent.app  # –æ–±—ä–µ–∫—Ç –≥—Ä–∞—Ñ–∞ –¥–ª—è LangGraph Studio
   ```
3. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π –º–æ–¥—É–ª—å `main.py` –≤ LangGraph Studio.
4. –ó–∞–ø—É—Å—Ç–∏ —Å–µ—Å—Å–∏—é –∏ –Ω–∞—á–Ω–∏ —á–∞—Ç.
5. –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ (–∫–æ–Ω—Ç–µ–∫—Å—Ç) —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `agent_state.db`.

---

### –ó–∞–ø—É—Å–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏

```
python controller.py
```

**–ü—Ä–∏–º–µ—Ä —Å–µ—Å—Å–∏–∏:**
```
–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω...
–í—ã: \start
–ü—Ä–∏–≤–µ—Ç! –Ø –∞–≥–µ–Ω—Ç –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–∞. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?
–í—ã: –°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ç–æ—Ä–º–æ–∑–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã?
–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ç–æ—Ä–º–æ–∑–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Å—Ç–æ–∏—Ç 1500 —Ä—É–±–ª–µ–π.
–í—ã: –ö–∞–∫–∏–µ –µ—Å—Ç—å —É—Å–ª—É–≥–∏ –ø–æ —Ä–µ–º–æ–Ω—Ç—É –ø–æ–¥–≤–µ—Å–∫–∏?
–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç: –î–æ—Å—Ç—É–ø–Ω—ã –∑–∞–º–µ–Ω–∞ —Ä—ã—á–∞–≥–æ–≤, –∞–º–æ—Ä—Ç–∏–∑–∞—Ç–æ—Ä–æ–≤ –∏ —Å–∞–π–ª–µ–Ω—Ç–±–ª–æ–∫–æ–≤.
```

–î–ª—è –≤—ã—Ö–æ–¥–∞ ‚Äî –∫–æ–º–∞–Ω–¥–∞ `\exit`.

---

### –ó–∞–ø—É—Å–∫ Telegram‚Äë–±–æ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –î–æ–±–∞–≤—å —Ç–æ–∫–µ–Ω –≤ `.env`:
   ```
   TG_TOKEN=1234567890:ABCDEFGHIJKLMNOPQRSTUVWXYZ
   ```
2. –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞:
   ```
   python controller.py
   ```
3. –í Telegram –Ω–∞–ø–∏—à–∏ `/start`.

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
(–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
     ‚Üì
  Controller (telegram / console / studio)
     ‚Üì
  CarAssistent.run(user_id, input)
     ‚Üì
  LangGraph (StateGraph)
     ‚îú‚îÄ input_node ‚Üí –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –∑–∞–ø—Ä–æ—Å–∞
     ‚îú‚îÄ search_node ‚Üí –∏—â–µ—Ç —É—Å–ª—É–≥–∏ –≤ Chroma
     ‚îú‚îÄ reasoning_node ‚Üí –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
     ‚îî‚îÄ output_node ‚Üí —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```

- –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ **SQLite**.  
- –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ (Chroma) —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ `Price.xlsx`.  
- –ú–æ–¥–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –ø–æ –ø—Ä–∞–π—Å—É**, –±–µ–∑ "–≤—ã–¥—É–º–∞–Ω–Ω—ã—Ö" –¥–∞–Ω–Ω—ã—Ö.  
- –ï—Å–ª–∏ —É—Å–ª—É–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ ‚Äî –∞–≥–µ–Ω—Ç —Å–æ–æ–±—â–∞–µ—Ç –æ–± —ç—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

---

## üí¨ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

- `–ö–∞–∫–∏–µ —É—Å–ª—É–≥–∏ –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –¥–æ—Å—Ç—É–ø–Ω—ã –∏ —Å–∫–æ–ª—å–∫–æ –æ–Ω–∏ —Å—Ç–æ—è—Ç?`
- `–°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤—ã—Ö–ª–æ–ø–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã?`
- `–ü–æ–¥—Å–∫–∞–∂–∏—Ç–µ —É—Å–ª—É–≥–∏ –ø–æ —Ä–µ–º–æ–Ω—Ç—É –ø–æ–¥–≤–µ—Å–∫–∏.`

–ï—Å–ª–∏ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –Ω–µ –ø–æ —Ç–µ–º–µ:
> ¬´–ö—Ç–æ –≤—ã–∏–≥—Ä–∞–ª —á–µ–º–ø–∏–æ–Ω–∞—Ç –º–∏—Ä–∞?¬ª

–ê–≥–µ–Ω—Ç –≤–µ–∂–ª–∏–≤–æ –≤–µ—Ä–Ω—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ —Ç–µ–º–µ –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–∞.

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Å–¥–∞—á–µ–π

- [x] Python 3.12 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω  
- [x] –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `uv sync`  
- [x] –ê–≥–µ–Ω—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ LangGraph Studio  
- [x] –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ SQLite  
- [x] Chroma –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏–∑ –ø—Ä–∞–π—Å-–ª–∏—Å—Ç–∞  
- [x] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) Telegram‚Äë–±–æ—Ç–æ–º –º–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è  

---
```
